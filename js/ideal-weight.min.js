document.addEventListener("DOMContentLoaded",function(){"use strict";var e=document.getElementById("height"),t=document.getElementById("current-weight"),n=document.getElementById("target-weight"),l=document.getElementById("diet-weeks"),o=document.getElementById("age"),a=document.getElementById("activity-level"),d=document.getElementById("calc-btn"),u=document.getElementById("reset-btn"),r=document.getElementById("result"),c=document.getElementById("result-bmi185"),m=document.getElementById("result-bmi20"),i=document.getElementById("result-bmi22"),g=document.getElementById("result-bmi25"),s=document.getElementById("result-current-bmi"),y=document.getElementById("result-target-bmi"),k=document.getElementById("result-weight-loss"),E=document.getElementById("result-weekly-loss"),I=document.getElementById("result-safety"),v=document.getElementById("result-bmr"),x=document.getElementById("result-tdee"),B=document.getElementById("result-calorie-deficit"),h=document.getElementById("result-target-calories");d.addEventListener("click",function(){var d=parseFloat(e.value),u=parseFloat(t.value),C=parseFloat(n.value),f=parseInt(l.value,10),b=parseInt(o.value,10),F=parseFloat(a.value),L=function(){for(var e=document.querySelectorAll('input[name="gender"]'),t=0;t<e.length;t++)if(e[t].checked)return e[t].value;return"male"}();if(isNaN(d)||d<100||d>250)alert("身長を正しく入力してください（100〜250cm）。");else if(isNaN(u)||u<30||u>300)alert("現在の体重を正しく入力してください（30〜300kg）。");else if(isNaN(C)||C<30||C>300)alert("目標体重を正しく入力してください（30〜300kg）。");else if(isNaN(f)||f<1||f>104)alert("ダイエット期間を正しく入力してください（1〜104週）。");else if(isNaN(b)||b<15||b>100)alert("年齢を正しく入力してください（15〜100歳）。");else{var M,N=d/100,p=18.5*N*N,S=20*N*N,w=22*N*N,q=25*N*N,A=u/(N*N),D=C/(N*N),O=u-C,V=O/f;M=O<=0?"増量計画です":V<=.5?"安全（週0.5kg以下）":V<=1?"注意が必要（週0.5〜1.0kg）":"危険！ペースが速すぎます（週1.0kg以上）";var j=function(e,t,n,l){return"male"===l?88.362+13.397*e+4.799*t-5.677*n:447.593+9.247*e+3.098*t-4.33*n}(u,d,b,L),z=j*F,G=7200*O/(7*f),H=z-G,J="male"===L?1500:1200,K="";H<J&&O>0&&(K="（※ "+J+"kcal未満は健康リスクあり）"),c.textContent=p.toFixed(1)+"kg",m.textContent=S.toFixed(1)+"kg",i.textContent=w.toFixed(1)+"kg",g.textContent=q.toFixed(1)+"kg",s.textContent=A.toFixed(1),y.textContent=D.toFixed(1),k.textContent=O>0?O.toFixed(1)+"kg 減量":O<0?Math.abs(O).toFixed(1)+"kg 増量":"現在の体重を維持",E.textContent=Math.abs(V).toFixed(2)+"kg/週",I.textContent=M,v.textContent=Math.round(j).toLocaleString()+"kcal",x.textContent=Math.round(z).toLocaleString()+"kcal",O>0?(B.textContent="-"+Math.round(G).toLocaleString()+"kcal",h.textContent=Math.round(H).toLocaleString()+"kcal"+K):(B.textContent="+"+Math.round(Math.abs(G)).toLocaleString()+"kcal",h.textContent=Math.round(H).toLocaleString()+"kcal"),r.hidden=!1,r.scrollIntoView({behavior:"smooth"})}}),u.addEventListener("click",function(){e.value="",t.value="",n.value="",l.value="",o.value="",a.value="1.55",document.querySelectorAll('input[name="gender"]')[0].checked=!0,r.hidden=!0})});