!function(){"use strict";var e=document.querySelectorAll('input[name="gender"]'),t=document.getElementById("age"),n=document.getElementById("height"),l=document.getElementById("weight"),a=document.getElementById("activity-level"),d=document.getElementById("calc-btn"),o=document.getElementById("reset-btn"),r=document.getElementById("result"),c=document.getElementById("bmr-value"),i=document.getElementById("tdee-value"),s=document.getElementById("bmi-value"),m=document.getElementById("activity-table-section"),u=document.getElementById("activity-table-body"),g=document.getElementById("goal-section"),h=document.getElementById("goal-table-body");var p=[{factor:1.2,label:"ほとんど運動しない",desc:"デスクワーク中心、運動習慣なし"},{factor:1.375,label:"軽い運動",desc:"週1〜3回の軽い運動やウォーキング"},{factor:1.55,label:"中程度の運動",desc:"週3〜5回のジョギングや水泳など"},{factor:1.725,label:"激しい運動",desc:"週6〜7回のハードなトレーニング"},{factor:1.9,label:"非常に激しい運動",desc:"プロアスリート、肉体労働者"}];d.addEventListener("click",function(){var d=function(){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t].value;return"male"}(),o=parseInt(t.value,10),v=parseFloat(n.value),x=parseFloat(l.value),y=parseFloat(a.value);if(isNaN(o)||o<1||o>120)alert("年齢を正しく入力してください（1〜120歳）。");else if(isNaN(v)||v<100||v>250)alert("身長を正しく入力してください（100〜250cm）。");else if(isNaN(x)||x<20||x>300)alert("体重を正しく入力してください（20〜300kg）。");else{var f,E=function(e,t,n,l){return"male"===e?88.362+13.397*t+4.799*n-5.677*l:447.593+9.247*t+3.098*n-4.33*l}(d,x,v,o),b=E*y,C=x/((f=v/100)*f);c.textContent=Math.round(E).toLocaleString()+" kcal/日",i.textContent=Math.round(b).toLocaleString()+" kcal/日",s.textContent=C.toFixed(1),function(e,t){u.innerHTML="";for(var n=0;n<p.length;n++){var l=p[n],a=Math.round(e*l.factor),d=document.createElement("tr");d.style.borderBottom="1px solid var(--color-border-light)",l.factor===t&&(d.style.background="var(--color-primary-light, #dbeafe)",d.style.fontWeight="600");var o=document.createElement("td");o.style.cssText="padding: 8px; text-align: left;",o.textContent=l.label;var r=document.createElement("td");r.style.cssText="padding: 8px; text-align: center;",r.textContent="× "+l.factor;var c=document.createElement("td");c.style.cssText="padding: 8px; text-align: right; font-weight: 600;",c.textContent=a.toLocaleString()+" kcal";var i=document.createElement("td");i.style.cssText="padding: 8px; text-align: left; font-size: 0.8rem; color: var(--color-text-secondary);",i.textContent=l.desc,d.appendChild(o),d.appendChild(r),d.appendChild(c),d.appendChild(i),u.appendChild(d)}m.hidden=!1}(E,y),function(e){h.innerHTML="";for(var t=[{label:"大幅な減量",calories:Math.round(.75*e),desc:"TDEEの75%。急激な減量は体への負担が大きいため医師に相談を。"},{label:"ゆるやかな減量",calories:Math.round(.85*e),desc:"TDEEの85%。月に約1〜2kgの減量ペース。持続しやすい。"},{label:"体重維持",calories:Math.round(e),desc:"現在の体重を維持するカロリー量。"},{label:"ゆるやかな増量",calories:Math.round(1.1*e),desc:"TDEEの110%。筋肉をつけながらゆっくり増量。"},{label:"積極的な増量",calories:Math.round(1.2*e),desc:"TDEEの120%。筋トレと併用で筋肉量を増やす。"}],n=0;n<t.length;n++){var l=t[n],a=document.createElement("tr");a.style.borderBottom="1px solid var(--color-border-light)","体重維持"===l.label&&(a.style.background="var(--color-primary-light, #dbeafe)",a.style.fontWeight="600");var d=document.createElement("td");d.style.cssText="padding: 8px; text-align: left;",d.textContent=l.label;var o=document.createElement("td");o.style.cssText="padding: 8px; text-align: right; font-weight: 600;",o.textContent=l.calories.toLocaleString()+" kcal";var r=document.createElement("td");r.style.cssText="padding: 8px; text-align: left; font-size: 0.8rem; color: var(--color-text-secondary);",r.textContent=l.desc,a.appendChild(d),a.appendChild(o),a.appendChild(r),h.appendChild(a)}g.hidden=!1}(b),r.hidden=!1,r.scrollIntoView({behavior:"smooth"})}}),o.addEventListener("click",function(){t.value="",n.value="",l.value="",e[0].checked=!0,a.selectedIndex=2,r.hidden=!0,m.hidden=!0,g.hidden=!0,u.innerHTML="",h.innerHTML=""})}();