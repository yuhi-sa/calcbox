document.addEventListener("DOMContentLoaded",function(){"use strict";var e=document.getElementById("payment-amount"),t=document.getElementById("calc-btn"),n=document.getElementById("reset-btn"),d=document.getElementById("result"),l=[{nameInput:document.getElementById("card1-name"),rateInput:document.getElementById("card1-rate"),valueInput:document.getElementById("card1-value"),resultEl:document.getElementById("result-card1"),titleEl:document.getElementById("result-card1-title"),pointsEl:document.getElementById("result-card1-points"),discountEl:document.getElementById("result-card1-discount"),effectiveEl:document.getElementById("result-card1-effective")},{nameInput:document.getElementById("card2-name"),rateInput:document.getElementById("card2-rate"),valueInput:document.getElementById("card2-value"),resultEl:document.getElementById("result-card2"),titleEl:document.getElementById("result-card2-title"),pointsEl:document.getElementById("result-card2-points"),discountEl:document.getElementById("result-card2-discount"),effectiveEl:document.getElementById("result-card2-effective")},{nameInput:document.getElementById("card3-name"),rateInput:document.getElementById("card3-rate"),valueInput:document.getElementById("card3-value"),resultEl:document.getElementById("result-card3"),titleEl:document.getElementById("result-card3-title"),pointsEl:document.getElementById("result-card3-points"),discountEl:document.getElementById("result-card3-discount"),effectiveEl:document.getElementById("result-card3-effective")}],u=document.getElementById("result-recommendation"),a=document.getElementById("result-best-card");function c(e){return Math.floor(e).toLocaleString()+"円"}t.addEventListener("click",function(){var t=parseFloat(e.value);if(isNaN(t)||t<=0)alert("支払い金額を正しく入力してください。");else{for(var n=-1,r="",o=0,m=0;m<l.length;m++){var i=l[m],s=parseFloat(i.rateInput.value),E=parseFloat(i.valueInput.value),I=i.nameInput.value||"カード"+(m+1);if(isNaN(s)||s<=0)i.resultEl.hidden=!0;else{(isNaN(E)||E<=0)&&(E=1),o++;var g=t*(s/100),v=g*E,y=v/t*100;i.titleEl.textContent=I,i.pointsEl.textContent=Math.floor(g).toLocaleString()+"ポイント",i.discountEl.textContent=c(v),i.effectiveEl.textContent=y.toFixed(2)+"%",i.resultEl.hidden=!1,v>n&&(n=v,r=I)}}0!==o?(o>=2?(a.textContent=r+"（実質割引額: "+c(n)+"）",u.hidden=!1):u.hidden=!0,d.hidden=!1,d.scrollIntoView({behavior:"smooth"})):alert("少なくとも1つのカードの還元率を入力してください。")}}),n.addEventListener("click",function(){e.value="";for(var t=0;t<l.length;t++)l[t].nameInput.value="",l[t].rateInput.value="",l[t].valueInput.value=0===t?"1":"",l[t].resultEl.hidden=!0;u.hidden=!0,d.hidden=!0})});