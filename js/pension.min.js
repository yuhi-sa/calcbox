document.addEventListener("DOMContentLoaded",function(){"use strict";var e=document.getElementById("current-age"),t=document.getElementById("avg-income"),n=document.getElementById("kokumin-years"),d=document.getElementById("kousei-years"),o=document.getElementById("start-age"),a=document.getElementById("calc-btn"),l=document.getElementById("reset-btn"),r=document.getElementById("result"),i=document.getElementById("comparison-section"),c=document.getElementById("comparison-body"),u=document.getElementById("result-kokumin"),s=document.getElementById("result-kousei"),m=document.getElementById("result-total-base"),g=document.getElementById("result-total-adjusted"),x=document.getElementById("result-monthly"),p=document.getElementById("result-rate-change");function y(e){return Math.floor(e).toLocaleString()+"円"}function v(e){var t=e/1e4;return t>=1?Math.floor(e).toLocaleString()+"円（約"+t.toFixed(1)+"万円）":Math.floor(e).toLocaleString()+"円"}function h(e){return e<65?-.004*(12*(65-e)):e>65?.007*(12*(e-65)):0}a.addEventListener("click",function(){var a=parseInt(e.value,10),l=parseFloat(t.value),E=parseInt(n.value,10)||0,I=parseInt(d.value,10),C=parseInt(o.value,10);if(isNaN(a)||a<20||a>74)alert("現在の年齢を正しく入力してください（20〜74歳）。");else if(isNaN(l)||l<=0)alert("平均年収を正しく入力してください。");else if(isNaN(I)||I<0)alert("厚生年金の加入期間を正しく入力してください。");else{var B=816e3*Math.min(12*(E+I),480)/480,f=.005481*(1e4*l/12)*I*12,b=B+f,k=h(C),L=b*(1+k),M=L/12;u.textContent=y(B),s.textContent=y(f),m.textContent=y(b),g.textContent=y(L),x.textContent=y(M),p.textContent=k<0?(100*k).toFixed(1)+"%（繰上げ減額）":k>0?"+"+(100*k).toFixed(1)+"%（繰下げ増額）":"0%（通常受給）",c.innerHTML="";for(var T=[60,62,65,67,70,75],F=0;F<T.length;F++){var N=T[F],S=h(N),w=b*(1+S),H=w/12,j=w*(85-N),D=document.createElement("tr");D.style.borderBottom="1px solid var(--color-border-light)",N===C&&(D.style.background="var(--color-bg-secondary)",D.style.fontWeight="600");var O=document.createElement("td");O.style.cssText="padding: 8px; text-align: center; font-weight: 600;",O.textContent=N+"歳";var V=document.createElement("td");V.style.cssText="padding: 8px; text-align: right;",V.textContent=S<0?(100*S).toFixed(1)+"%":S>0?"+"+(100*S).toFixed(1)+"%":"0%";var W=document.createElement("td");W.style.cssText="padding: 8px; text-align: right;",W.textContent=y(H);var q=document.createElement("td");q.style.cssText="padding: 8px; text-align: right;",q.textContent=y(w);var z=document.createElement("td");z.style.cssText="padding: 8px; text-align: right;",z.textContent=v(j),D.appendChild(O),D.appendChild(V),D.appendChild(W),D.appendChild(q),D.appendChild(z),c.appendChild(D)}r.hidden=!1,i.hidden=!1,r.scrollIntoView({behavior:"smooth"})}}),l.addEventListener("click",function(){e.value="",t.value="",n.value="0",d.value="",o.value="65",r.hidden=!0,i.hidden=!0,c.innerHTML=""})});