!function(){"use strict";var e=document.getElementById("annual-income"),t=document.getElementById("family-type"),n=document.querySelectorAll('input[name="housing-loan"]'),d=document.getElementById("housing-loan-amount-group"),a=document.getElementById("housing-loan-amount"),r=document.getElementById("calc-btn"),o=document.getElementById("reset-btn"),i=document.getElementById("result"),c=document.getElementById("max-deduction"),l=document.getElementById("benefit-amount"),u=document.getElementById("recommendation-section"),m=document.getElementById("table-section"),s=document.getElementById("income-table-body");function h(e,t,n){var d=1e4*e,a=d-(d<=1625e3?55e4:d<=18e5?.4*d-1e5:d<=36e5?.3*d+8e4:d<=66e5?.2*d+44e4:d<=85e5?.1*d+11e5:195e4);a<0&&(a=0);var r=.15*d,o=0;switch(t){case"single":o=0;break;case"married":o=38e4;break;case"married-child1":o=76e4;break;case"married-child2":o=139e4}var i=a-48e4-r-o;i<0&&(i=0);var c=.9-1.021*(i<=195e4?.05:i<=33e5?.1:i<=695e4?.2:i<=9e6?.23:i<=18e6?.33:i<=4e7?.4:.45);c<=0&&(c=.001);var l=.2*(.1*i)/c+2e3;n>0&&(l-=.15*(1e4*n));return l<2e3&&(l=2e3),Math.floor(l)}function g(e){return Math.round(e).toLocaleString()+"円"}function v(e){var t=e/1e4;return t>=1?Math.round(e).toLocaleString()+"円（約"+t.toFixed(1)+"万円）":Math.round(e).toLocaleString()+"円"}n.forEach(function(e){e.addEventListener("change",function(){d.hidden="yes"!==this.value})}),r.addEventListener("click",function(){var d=parseFloat(e.value);if(isNaN(d)||d<=0)alert("年収を正しく入力してください。");else{var r=t.value,o=0;"yes"===function(){for(var e=0;e<n.length;e++)if(n[e].checked)return n[e].value;return"none"}()&&(o=parseFloat(a.value)||0);var y=h(d,r,o),f=y-2e3;f<0&&(f=0),c.textContent=v(y),l.textContent=v(f),i.hidden=!1,u.hidden=!1,function(e){s.innerHTML="";for(var t=[300,400,500,600,700,800,900,1e3,1200,1500,2e3],n=["single","married","married-child1","married-child2"],d=0;d<t.length;d++){var a=document.createElement("tr");a.style.borderBottom="1px solid var(--color-border-light)";var r=document.createElement("td");r.style.cssText="padding: 8px; text-align: center; font-weight: 600;",r.textContent=t[d]+"万円",a.appendChild(r);for(var o=0;o<n.length;o++){var i=document.createElement("td");i.style.cssText="padding: 8px; text-align: right;";var c=h(t[d],n[o],e);i.textContent=g(c),a.appendChild(i)}s.appendChild(a)}m.hidden=!1}(o),i.scrollIntoView({behavior:"smooth"})}}),o.addEventListener("click",function(){e.value="",t.selectedIndex=0,n[0].checked=!0,d.hidden=!0,a.value="",i.hidden=!0,u.hidden=!0,m.hidden=!0,s.innerHTML=""})}();